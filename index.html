<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8">
    <title>My websocket chat</title>
  </head>

  <!-- STYLE -->
  <style>
    * {
      margin: 10px;
    }
    form {
      position: fixed;
      bottom: 0;
      width: 100%;
      padding: 3px;
    }
  </style>
  
  <!-- BODY -->
  <body>
    <h1>Hello my websocket chat</h1>
    <ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" />
      <button>Send</button>
    </form>

    <!-- SCRIPTS -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      const socket = io();
      const form = document.querySelector('form');
      const sendButton = document.querySelector('button');

      sendButton.addEventListener('click', (event) => {
        event.preventDefault();
        event.stopPropagation();
        const message = form.firstElementChild.value;
        socket.emit('chat message', message);
        form.firstElementChild.value = '';
      });

      socket.on('chat message', (msg) => {
        let listMessages = document.getElementById('messages');
        let newMsg = document.createElement('li');
        newMsg.appendChild(document.createTextNode(msg));
        console.log(newMsg);
        listMessages.appendChild(newMsg);
      });

    </script>
  </body>
</html>